{"version":3,"file":"allianz-ngx-aem-integration-ngx-translate-loader.mjs","sources":["../../../library/src/ngx-translate-loader/aem-translate-loader.ts","../../../library/src/ngx-translate-loader/allianz-ngx-aem-integration-ngx-translate-loader.ts"],"sourcesContent":["import { EmbeddedDataService, NormalizeUrlService } from '@allianz/ngx-aem-integration';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { TranslateLoader } from '@ngx-translate/core';\nimport { Observable, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AemTranslateLoader implements TranslateLoader {\n  constructor(\n    private http: HttpClient,\n    private normalizeUrlService: NormalizeUrlService,\n    private embeddedDataService: EmbeddedDataService<unknown>,\n  ) {}\n\n  /**\n   * Translations resolution logic:\n   *    1. If i18n attribute was received, use that\n   *    2. try global i18n\n   * @param lang\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getTranslation(lang: string): Observable<any> {\n    // 1.\n    if (this.embeddedDataService.I18n) {\n      return of(this.embeddedDataService.I18n);\n    }\n\n    // 2.\n    return this.http\n      .get(\n        this.normalizeUrlService.normalizeUrl(`${this.embeddedDataService.embeddedDataServiceConfig.AssetsBasePath}/i18n/${lang}.json`),\n        { withCredentials: true },\n      )\n      .pipe(\n        catchError((err) => {\n          if (!this.embeddedDataService.embeddedDataServiceConfig.production) {\n            console.log(err);\n          }\n          return of(null);\n        }),\n      );\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;MAUa,kBAAkB,CAAA;AAC7B,IAAA,WAAA,CACU,IAAgB,EAChB,mBAAwC,EACxC,mBAAiD,EAAA;QAFjD,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAY;QAChB,IAAmB,CAAA,mBAAA,GAAnB,mBAAmB,CAAqB;QACxC,IAAmB,CAAA,mBAAA,GAAnB,mBAAmB,CAA8B;KACvD;AAEJ;;;;;AAKG;;AAEH,IAAA,cAAc,CAAC,IAAY,EAAA;;AAEzB,QAAA,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE;YACjC,OAAO,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;SAC1C;;QAGD,OAAO,IAAI,CAAC,IAAI;aACb,GAAG,CACF,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAA,EAAG,IAAI,CAAC,mBAAmB,CAAC,yBAAyB,CAAC,cAAc,CAAS,MAAA,EAAA,IAAI,CAAO,KAAA,CAAA,CAAC,EAC/H,EAAE,eAAe,EAAE,IAAI,EAAE,CAC1B;AACA,aAAA,IAAI,CACH,UAAU,CAAC,CAAC,GAAG,KAAI;YACjB,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,yBAAyB,CAAC,UAAU,EAAE;AAClE,gBAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aAClB;AACD,YAAA,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC;SACjB,CAAC,CACH,CAAC;KACL;8GAlCU,kBAAkB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,UAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,mBAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,mBAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;AAAlB,IAAA,SAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,kBAAkB,cAFjB,MAAM,EAAA,CAAA,CAAA,EAAA;;2FAEP,kBAAkB,EAAA,UAAA,EAAA,CAAA;kBAH9B,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AACnB,iBAAA,CAAA;;;ACTD;;AAEG;;;;"}